#summary The different ways of exporting metadata in JANUS

= Introduction =
JANUS supplies different ways of exporting metadata. On the entity level and on the federation level.

= Entity metadata export =
In the edit entity view, you can hit the Export tab and click the Export matadata link.

The page will display the metadata of the entity in SimpleSAMLphp flat file format. Links for displaying the metadata in SAML xml format and JSON is located in the buttom of the page.

The page have the following parameters

|| *Parameter* || *Value* || *Required* ||
|| eid || _int_ || Yes ||
|| revisionid || _int_ || Yes ||
|| output || 'xhtml' or not set || No ||

*PLEASE* note that this page is protected, so only authorized users can access this page. This page should not be used for automatically export of metadata.

= Federation metadata export =
Federation metadata export can be done both dynamic or by pre-configuring the entities to be exported.

== Configuration ==
There are four configuration parameters related to metadata export. 

 * [MetadataExport111#Post_processors mdexport.postprocessor]
 * [MetadataExport111#Feeds mdexport.feeds]
 * [MetadataExport111#Mime_types mdexport.allowed_mime]
 * [MetadataExport111#Default_options mdexport.default_options]

=== Options ===

The following is a quick overview of all allowed options used for exporting metadata
|| *Parameter* || *Value* ||
|| [MetadataExport111ConfigOptions#array__types types] || _array_ ||
|| [MetadataExport111ConfigOptions#array__states states] || _array_ ||
|| [MetadataExport111ConfigOptions#string__mime mime] || _string_ ||
|| [MetadataExport111ConfigOptions#array__exclude exclude] || _array_ ||
|| [MetadataExport111ConfigOptions#string__postprocessor postprocessor] || _string_ ||
|| [MetadataExport111ConfigOptions#string__entitiesDescriptorName entitiesDescriptorName] || _string_ ||
|| [MetadataExport111ConfigOptions#string__filename filename] || _string_ ||
|| [MetadataExport111ConfigOptions#int__maxCache maxCache] || _int_ ||
|| [MetadataExport111ConfigOptions#int__maxDuration maxDuration] || _int_ ||
|| [MetadataExport111ConfigOptions#boolean__sign.enable sign.enable] || _boolean_ ||
|| [MetadataExport111ConfigOptions#string__sign.privatekey sign.privatekey] || _string_ ||
|| [MetadataExport111ConfigOptions#string_-sign.privatekeye_pass sign.privatekey_pass] || _string_ ||
|| [MetadataExport111ConfigOptions#string__sign.certificate sign.certificate] || _string_ ||

=== Default options ===
The `mdexport.default_options` options array should contain default values for all metadata exports. These values can be overwritten in both dynamic mode and in preconfigured mode.

You should define default values for at least the following two options:

 * entitiesDescriptorName
 * mime

Example of a default configuration
{{{
'mdexport.default_options' => array(
    'entitiesDescriptorName' => 'Example Federation',
    'mime' => 'application/xml',
    'maxCache'      => 60*60*24, // 24 hour cache time
    'maxDuration'   => 60*60*24*5, // Maximum 5 days duration on ValidUntil.
    'sign.enable' => FALSE, // Don not sign metadata by default
),
}}}

A complete list of configuration options can eb found [MetadataExport111ConfigOptions here].

=== Post processors ===
*NOTE* it is up the post processor to out put the metadata after the processing is done.

=== Feeds ===


=== Mime types ===
JANUS do by default support the following 3 mime types.

 * application/xml
 * application/samlmetadata+xml
 * application/simplesamlphp+text

Defining your own mime type does not change the actual exported metadata, only the `Content-Type` header. 

The returned metadata will always be SAML xml metadata except in the case where the mime type is set to `application/simplesamlphp+text` in which case the returned metadata is in simpleSAMLphp format.

== Dynamic metadata export ==
Export of federation metadata can be done dynamically in JANUS. Go to the Federation tab and hit the Federation export link.

|| *Parameter* || *Value* || *Required* ||
|| md || _void_ || Yes ||
|| type || _array(string)_ || Yes ||
|| state || _string_ || Yes ||
|| mime || _string_ || Yes ||
|| filename || _string_ || No ||
|| exclude || _string_ || No ||
|| postpro || _string_ || No ||
|| ignoreerrors || 'on' || No ||

== Configured metadata export ==


  